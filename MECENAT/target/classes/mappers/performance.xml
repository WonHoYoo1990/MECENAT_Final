<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="performanceMapperMana">
	
	<resultMap type="performanceMana" id="performanceResultSet">
	  	<result column="PERFO_NO" property="perfoNo"/>
	  	<result column="RENTAL_CODE" property="rentalCode"/>
	  	<result column="PERFO_TITLE" property="perfoTitle"/>
	  	<result column="GENRE_NAME" property="genreName"/>
	  	<result column="PERFO_EVENT_DATE" property="perfoEventDate"/>
	  	<result column="DIRECTOR" property="director"/>
	  	<result column="CAST" property="cast"/>
	  	<result column="PERFO_CONTENT" property="perfoContent"/>
	  	<result column="START_TIME" property="startTime"/>
	  	<result column="RUNNING_TIME" property="runningTime"/>
	  	<result column="AGE_LIMIT" property="ageLimit"/>
	  	<result column="PERFO_STATUS" property="perfoStatus"/>
	  	<result column="PRICE" property="price"/>
	  	<result column="ORIGIN_NAME" property="originName"/>
	  	<result column="CHANGE_NAME" property="changeName"/>
	</resultMap>
	

	<select id="selectPerformanceList" resultMap="performanceResultSet">
		SELECT RENTAL_CODE,
			   PERFO_TITLE,
			   GENRE_NAME,
			   DIRECTOR,
			   CAST,
			   PERFO_CONTENT,
			   RUNNING_TIME,
			   AGE_LIMIT,
			   PRICE,
			   ORIGIN_NAME, 
			   CHANGE_NAME
		FROM PERFORMANCE
		GROUP BY RENTAL_CODE,
			     PERFO_TITLE,
			     GENRE_NAME,
			     DIRECTOR,
			     CAST,
			     PERFO_CONTENT,
			     RUNNING_TIME,
			     AGE_LIMIT,
			     PRICE,
			     ORIGIN_NAME, 
			     CHANGE_NAME
		ORDER BY RENTAL_CODE
	</select>
	
	<!-- selectDetailPerformance -->
	<select id="selectDetailPerformance" resultMap="performanceResultSet">
		SELECT RENTAL_CODE,
			   PERFO_TITLE,
			   GENRE_NAME,
			   DIRECTOR,
			   CAST,
			   PERFO_CONTENT,
			   RUNNING_TIME,
			   AGE_LIMIT,
			   PRICE,
			   ORIGIN_NAME, 
			   CHANGE_NAME
		FROM PERFORMANCE
		GROUP BY RENTAL_CODE,
			     PERFO_TITLE,
			     GENRE_NAME,
			     DIRECTOR,
			     CAST,
			     PERFO_CONTENT,
			     RUNNING_TIME,
			     AGE_LIMIT,
			     PRICE,
			     ORIGIN_NAME, 
			     CHANGE_NAME
        HAVING RENTAL_CODE=#{rno}
		ORDER BY RENTAL_CODE
		
	</select>
	
	
	
	
	
	
	<insert id="insertPerformance">
		INSERT INTO PERFORMANCE(PERFO_NO,
								RENTAL_CODE,
								PERFO_TITLE,
								GENRE_NAME,
								PERFO_EVENT_DATE,
								DIRECTOR,
								CAST,
								PERFO_CONTENT,
								START_TIME,
								RUNNING_TIME,
								AGE_LIMIT,
								PERFO_STATUS,
								PRICE,
								ORIGIN_NAME,
								CHANGE_NAME)
							
						VALUES( SEQ_PERFONO.NEXTVAL,
								3,
								#{perfoTitle},
								#{genreName},
								#{perfoEventDate},
								#{director},
								#{cast},
								#{perfoContent},
								#{startTime},
								#{runningTime},
								#{ageLimit},
								#{perfoStatus},
								#{price},
								#{originName},
								#{changeName}
									)
		
	
	</insert>
	
	<!-- 서브메인 공연 리스트 조회-->
	<select id="subMainPerformanceList" resultMap="performanceResultSet">
		SELECT * 
		FROM PERFORMANCE
		WHERE PERFO_EVENT_DATE = #{sdate}
	</select>
	
	<!-- 서브메인 공연 리스트 개수-->
	<select id="subMainPerformanceListCount" resultType="int">
		SELECT COUNT(*)
		FROM PERFORMANCE
		WHERE PERFO_EVENT_DATE = #{sdate}
	</select>
	
	<!-- 서브메인 공연 리스트 최신순 조회 -->
	<select id="subMainPerformanceSearchSort1" resultMap="performanceResultSet">
		SELECT * 
		FROM PERFORMANCE
		WHERE PERFO_EVENT_DATE = #{sdate}
		ORDER BY PERFO_EVENT_DATE
	</select>
	
	
	
	
	
	
	
	
	
	
</mapper>

















